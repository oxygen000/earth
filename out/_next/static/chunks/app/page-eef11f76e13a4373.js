(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3686:()=>{},2383:()=>{},6994:(e,t,s)=>{Promise.resolve().then(s.bind(s,9386))},9386:(e,t,s)=>{"use strict";s.d(t,{EnhancedDivisibleSpaceComponent:()=>q});var r=s(5155),a=s(2115),i=s(2317),l=s(652),d=s(3463),n=s(9795);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,d.$)(t))}let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:d=!1,...n}=e,u=d?i.DX:"button";return(0,r.jsx)(u,{className:o(c({variant:a,size:l,className:s})),ref:t,...n})});u.displayName="Button";let f=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:o("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});f.displayName="Input";var m=s(6195);let x=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(m.b,{ref:t,className:o(x(),s),...a})});p.displayName=m.b.displayName;let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:o("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...a})});h.displayName="Textarea";let v=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:o("rounded-xl border bg-card text-card-foreground shadow",s),...a})});v.displayName="Card";let g=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:o("flex flex-col space-y-1.5 p-6",s),...a})});g.displayName="CardHeader";let b=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:o("font-semibold leading-none tracking-tight",s),...a})});b.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:o("text-sm text-muted-foreground",s),...a})}).displayName="CardDescription";let y=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:o("p-6 pt-0",s),...a})});y.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:o("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter";let j=0,N=new Map,w=e=>{if(N.has(e))return;let t=setTimeout(()=>{N.delete(e),_({type:"REMOVE_TOAST",toastId:e})},1e6);N.set(e,t)},C=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?w(s):e.toasts.forEach(e=>{w(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},S=[],T={toasts:[]};function _(e){T=C(T,e),S.forEach(e=>{e(T)})}function R(e){let{...t}=e,s=(j=(j+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>_({type:"DISMISS_TOAST",toastId:s});return _({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>_({type:"UPDATE_TOAST",toast:{...e,id:s}})}}var k=s(4756);let A=k.Kq;k.bL,k.l9,a.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...i}=e;return(0,r.jsx)(k.ZL,{children:(0,r.jsx)(k.UC,{ref:t,sideOffset:a,className:o("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})})}).displayName=k.UC.displayName;let E=(0,l.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function I(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:o(E({variant:s}),t),...a})}var O=s(9986);let D=O.bL,F=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(O.B8,{ref:t,className:o("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...a})});F.displayName=O.B8.displayName;let B=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(O.l9,{ref:t,className:o("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...a})});B.displayName=O.l9.displayName;let L=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(O.UC,{ref:t,className:o("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});L.displayName=O.UC.displayName;var M=s(7660);function q(){let[e,t]=(0,a.useState)(32),[s,i]=(0,a.useState)(32),[l,d]=(0,a.useState)([]),[n,o]=(0,a.useState)(""),[c,m]=(0,a.useState)(null),[x,j]=(0,a.useState)("");(0,a.useEffect)(()=>{let r=localStorage.getItem("enhancedDivisibleSpaceState");if(r){let{rows:e,cols:s,squares:a,name:l}=JSON.parse(r);t(e),i(s),d(a),o(l||"")}else d(Array.from({length:e*s},(e,t)=>({id:t,details:"",reserved:!1,reservedBy:"",color:"#ff0000",tags:[],capacity:1})))},[s,e]);let N=(e,s)=>{t(e),i(s),d(Array.from({length:e*s},(e,t)=>({id:t,details:"",reserved:!1,reservedBy:"",color:"#ff0000",tags:[],capacity:1})))},w=e=>{m(e)},C=e=>{if(!n){R({title:"Name Required",description:"Please enter your name before reserving a square.",variant:"destructive"});return}d(l.map(t=>t.id===e?{...t,reserved:!t.reserved,reservedBy:t.reserved?"":n}:t)),m(e=>e?{...e,reserved:!e.reserved,reservedBy:e.reserved?"":n}:null)},S=(e,t)=>{d(l.map(s=>s.id===e?{...s,details:t}:s)),m(s=>s&&s.id===e?{...s,details:t}:s)},T=(e,t)=>{d(l.map(s=>s.id===e?{...s,color:t}:s)),m(s=>s&&s.id===e?{...s,color:t}:s)},_=(e,t)=>{let s=t.split(",").map(e=>e.trim()).filter(e=>""!==e);d(l.map(t=>t.id===e?{...t,tags:s}:t)),m(t=>t&&t.id===e?{...t,tags:s}:t)},k=(e,t)=>{d(l.map(s=>s.id===e?{...s,capacity:t}:s)),m(s=>s&&s.id===e?{...s,capacity:t}:s)},E=l.filter(e=>e.details.toLowerCase().includes(x.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(x.toLowerCase()))||e.reservedBy.toLowerCase().includes(x.toLowerCase())),O=l.filter(e=>e.reserved);return(0,r.jsx)(A,{children:(0,r.jsxs)("div",{className:"container mx-auto p-4 space-y-4 text-6xl",dir:"rtl",children:[" ",(0,r.jsx)("h1",{className:"text-6xl font-bold",children:"المساحة القابلة للتقسيم المحسّنة"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 text-6xl",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p,{htmlFor:"rows",children:"عدد الصفوف"}),(0,r.jsx)(f,{id:"rows",type:"number",min:"1",value:e,onChange:e=>N(Math.max(1,parseInt(e.target.value)||1),s),className:"w-20 text-6xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p,{htmlFor:"cols",children:"عدد الأعمدة"}),(0,r.jsx)(f,{id:"cols",type:"number",min:"1",value:s,onChange:t=>N(e,Math.max(1,parseInt(t.target.value)||1)),className:"w-20 text-6xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p,{htmlFor:"name",children:"اسمك"}),(0,r.jsx)(f,{id:"name",type:"text",value:n,onChange:e=>o(e.target.value),className:"w-40 text-6xl",placeholder:"أدخل اسمك"})]}),(0,r.jsx)(u,{onClick:()=>{localStorage.setItem("enhancedDivisibleSpaceState",JSON.stringify({rows:e,cols:s,squares:l,name:n})),R({title:"Saved",description:"The current space configuration has been saved."})},className:"self-end",children:"حفظ التكوين"}),(0,r.jsx)(u,{onClick:()=>{let e=M.Wp.json_to_sheet(l.map(e=>({"Square ID":e.id+1,Details:e.details,Reserved:e.reserved?"Yes":"No","Reserved By":e.reservedBy,Capacity:e.capacity,Tags:e.tags.join(", ")}))),t=M.Wp.book_new();M.Wp.book_append_sheet(t,e,"Squares"),M._h(t,"divisible_space.xlsx")},className:"self-end bg-green-500 hover:bg-green-400",children:"تصدير إلى Excel"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p,{htmlFor:"search",children:"بحث في المربعات"}),(0,r.jsx)(f,{id:"search",type:"text",value:x,onChange:e=>j(e.target.value),placeholder:"ابحث حسب التفاصيل أو العلامات أو المحجوز من قبل",className:"w-full text-6xl"})]}),(0,r.jsx)("div",{className:"w-full aspect-video border border-gray-300",style:{display:"grid",gridTemplateColumns:"repeat(".concat(s,", 1fr)"),gridTemplateRows:"repeat(".concat(e,", 1fr)"),gap:"1px"},children:E.map(e=>(0,r.jsxs)("div",{className:"cursor-pointer border p-2 relative",style:{backgroundColor:e.color},onClick:()=>w(e),children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:e.reserved&&(0,r.jsx)(I,{className:"bg-green-500",children:"محجوز"})}),e.reserved&&(0,r.jsxs)("div",{className:"text-sm mt-2",children:["محجوز من قبل: ",e.reservedBy]})]},e.id))}),c&&(0,r.jsxs)(v,{className:"mt-4",children:[(0,r.jsx)(g,{children:(0,r.jsxs)(b,{children:["تفاصيل المربع ",c.id+1]})}),(0,r.jsx)(y,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(p,{htmlFor:"details",children:"تفاصيل"}),(0,r.jsx)(h,{id:"details",value:c.details,onChange:e=>S(c.id,e.target.value),className:"text-6xl",placeholder:"أدخل تفاصيل المربع"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(p,{htmlFor:"color",children:"اللون"}),(0,r.jsx)(f,{id:"color",type:"color",value:c.color,onChange:e=>T(c.id,e.target.value),className:"w-20 text-6xl"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(p,{htmlFor:"tags",children:"العلامات"}),(0,r.jsx)(f,{id:"tags",type:"text",value:c.tags.join(", "),onChange:e=>_(c.id,e.target.value),className:"w-full text-6xl",placeholder:"أدخل العلامات (مفصولة بفواصل)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(p,{htmlFor:"capacity",children:"السعة"}),(0,r.jsx)(f,{id:"capacity",type:"number",value:c.capacity,onChange:e=>k(c.id,parseInt(e.target.value)),className:"w-20 text-6xl"})]}),(0,r.jsx)(u,{onClick:()=>C(c.id),className:"w-full text-4xl",children:c.reserved?"إلغاء الحجز":"حجز المربع"})]})})]}),O.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h2",{className:"text-6xl",children:"المربعات المحجوزة"}),(0,r.jsx)("ul",{className:"space-y-2 text-6xl",children:O.map(e=>(0,r.jsxs)("li",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{children:["المربع ",e.id+1]}),(0,r.jsxs)("span",{children:["محجوز من قبل: ",e.reservedBy]})]},e.id))})]}),(0,r.jsxs)(D,{defaultValue:"all",className:"w-full",dir:"rtl",children:[(0,r.jsxs)(F,{children:[(0,r.jsx)(B,{value:"all",children:"جميع المربعات"}),(0,r.jsx)(B,{value:"reserved",children:"المربعات المحجوزة"})]}),(0,r.jsx)(L,{value:"all",children:(0,r.jsxs)(v,{children:[(0,r.jsx)(g,{children:(0,r.jsx)(b,{children:"ملخص جميع المربعات"})}),(0,r.jsxs)(y,{children:[(0,r.jsxs)("p",{children:["إجمالي المربعات: ",l.length]}),(0,r.jsxs)("p",{children:["المربعات المحجوزة: ",O.length]}),(0,r.jsxs)("p",{children:["المربعات المتاحة: ",l.length-O.length]})]})]})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[524,990,441,517,358],()=>t(6994)),_N_E=e.O()}]);